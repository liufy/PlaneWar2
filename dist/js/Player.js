define(["Spirit","Bullet"],function(e,t){function i(t){e.call(this,t),this.getDragAction(),this.bulletArr=[],this.isCrashFlag=!1,this.destoryArr=["me_die1.png","me_die2.png","me_die3.png","me_die4.png"]}return i.prototype=new e,i.prototype.destory=function(e){var t=this,i=0;t.destoryTimer=setInterval(function(){$(t.ele).css("background","url(img/"+t.destoryArr[i]+")"),++i==t.destoryArr.length&&(clearInterval(t.destoryTimer),e&&e())},50)},i.prototype.fire=function(e){var i=this;setInterval(function(){var e=new t("bullet"),o=$(i.ele).position().left+($(i.ele).width()-$(e.ele).width())/2,n=$(i.ele).position().top-$(e.ele).height();$(e.ele).css({left:o,top:n}),e.attack(),i.bulletArr.push(e)},100*e)},i.prototype.getDragAction=function(){var e=this;$(e.ele).on({mousedown:function(t){e.disX=t.offsetX,e.disY=t.offsetY,$(window).mousemove(function(t){var i=t.clientX-e.disX-$(".container").get(0).offsetLeft,o=t.clientY-e.disY;i<=0?i=0:i>=$(".container").width()-$(e.ele).width()&&(i=$(".container").width()-$(e.ele).width()),$(e.ele).css({left:i,top:o})}),$(window).mouseup(function(){$(window).off("mousemove mouseup")})}})},i});